(this["webpackJsonpreact-tetris"]=this["webpackJsonpreact-tetris"]||[]).push([[0],{17:function(t,n,e){t.exports=e.p+"static/media/background.6255a470.jpg"},19:function(t,n,e){t.exports=e(32)},24:function(t,n,e){},25:function(t,n,e){},32:function(t,n,e){"use strict";e.r(n);var r=e(0),o=e.n(r),i=e(12),c=e.n(i),a=(e(24),e(25),e(1)),u=e(2),l=e(3);function f(){var t=Object(u.a)(['\n\tfont-size: 2.2em;\n\tfont-family: "ZCOOL QingKe HuangYou", cursive;\n\t/* border: 2px solid #222; */\n\tborder: none;\n\tpadding: 30px 100px;\n\tbackground-color: #fff;\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tvertical-align: middle;\n\ttext-decoration: none;\n\ttransition: all 0.5s;\n\tcolor: #95190c;\n\tborder-right: 1px solid #eee;\n\tborder-radius: 2px;\n\tborder-bottom: 1px solid #ccc;\n\n\t:focus {\n\t\toutline: 0;\n\t}\n\n\t:hover {\n\t\tmargin-left: 5px;\n\t\tmargin-top: 5px;\n\t\t::after {\n\t\t\tright: -5px;\n\t\t\ttop: 2px;\n\t\t\twidth: 5px;\n\t\t}\n\t\t::before {\n\t\t\tright: -3px;\n\t\t\theight: 5px;\n\t\t}\n\t}\n\n\t::after {\n\t\tcontent: "";\n\t\theight: 100%;\n\t\twidth: 10px;\n\t\tbackground-color: #eee;\n\t\tright: -10px;\n\t\ttop: 5px;\n\t\ttransform: skewY(45deg);\n\t\tposition: absolute;\n\t\ttransition: all 0.5s;\n\t}\n\n\t::before {\n\t\tcontent: "";\n\t\theight: 10px;\n\t\twidth: 100%;\n\t\tbackground-color: #ccc;\n\t\tright: -5px;\n\t\ttop: 95px;\n\t\ttransform: skewX(45deg);\n\t\tposition: absolute;\n\t\ttransition: all 0.5s;\n\t}\n']);return f=function(){return t},t}function p(){var t=Object(u.a)(["\n\twidth: 100vw;\n\theight: 100vh;\n\toverflow: hidden;\n\tbackground-color: #e3b505;\n"]);return p=function(){return t},t}var s=l.a.div(p()),b=l.a.button(f()),d=function(t){var n=t.startClick;return o.a.createElement(s,null,o.a.createElement(b,{onClick:n},"Start"))},h=e(4),v=e(5),g=e(18),x=e(15),m=e.n(x);function O(){var t=window;return{width:t.innerWidth,height:t.innerHeight}}var j=e(17),S=e.n(j);function w(){var t=Object(u.a)(["\n\twidth: 100%;\n\ttext-align: center;\n\tcolor: white;\n"]);return w=function(){return t},t}function E(){var t=Object(u.a)(["\n\twidth: 100%;\n\ttext-align: center;\n\tcolor: white;\n"]);return E=function(){return t},t}function k(){var t=Object(u.a)(["\n\tbackground-color: black;\n\tborder: ","px solid white;\n\t",'\n\tfont-family: "ZCOOL QingKe HuangYou", cursive;\n\tpadding: ',"px ","px; /*15*/\n\tmargin-bottom: ","px; /*10*/ \n"]);return k=function(){return t},t}var z=l.a.div(k(),(function(t){return t.borderSize?t.borderSize:"3"}),(function(t){return!t.portrait&&"width: 100%;"}),(function(t){return t.padding?t.padding:"15"}),(function(t){return t.portrait?t.padding/2:0}),(function(t){return t.margin?t.margin:"10"})),y=l.a.div(E()),C=l.a.div(w()),J=function(t){var n=t.title,e=t.value,r=t.padding,i=t.margin,c=t.borderSize,a=t.portrait;return o.a.createElement(z,{portrait:a,padding:r,margin:i,borderSize:c},o.a.createElement(y,null,n),o.a.createElement(C,null,e))};function N(){var t=Object(u.a)(["\n\twidth: ","px;\n\t","\n\t","\n\tmargin-left: ","px;\n\tmargin-top: ","px;\n\tdisplay: flex;\n\tflex-direction: ",";\n\talign-items: center;\n\tjustify-content: ",";\n\tfont-size: ","px;\n"]);return N=function(){return t},t}function L(){var t=Object(u.a)(["\n  width: ","px;\n  height: ","px;\n  background-color: ",";\n\tbox-shadow: ",";\n\tborder-left: 1px solid ",";\n\tborder-top: 1px solid ",";\n"]);return L=function(){return t},t}function M(){var t=Object(u.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: center;\n\theight: ","px;\n"]);return M=function(){return t},t}function D(){var t=Object(u.a)(["\n\tborder: ","px solid white;\n\tbackground-color: black;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n"]);return D=function(){return t},t}function I(){var t=Object(u.a)(["\n\twidth: ","px;\n\theight: ","px;\n\tbackground-color: black;\n\tborder: ","px solid white;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n"]);return I=function(){return t},t}function K(){var t=Object(u.a)(["\n\t","\n\t","\n\tmargin-right: ","px;\n\tmargin-bottom: ","px;\n"]);return K=function(){return t},t}function A(){var t=Object(u.a)(["\n\twidth: 100vw;\n\theight: ","vh;\n\tdisplay: flex;\n\tflex-direction: ",";\n\tjustify-content: center;\n\talign-items: center;\n\tbackground-image: url(",");\n\tbackground-size: cover;\n\tbackground-position: center;\n"]);return A=function(){return t},t}var H=l.a.div(A(),(function(t){return t.portrait?"95":"100"}),(function(t){return t.portrait?"column":"row"}),S.a),R=l.a.div(K(),(function(t){return!t.portrait&&"height: ".concat(18*t.pixelSize+6,"px;")}),(function(t){return t.portrait&&"width: ".concat(10*t.pixelSize+10/3*1,"px;")}),(function(t){return t.portrait?0:t.pixelSize/3}),(function(t){return t.portrait?t.pixelSize/3:0})),Y=l.a.div(I(),(function(t){return 3*t.pixelSize}),(function(t){return 3*t.pixelSize}),(function(t){return t.pixelSize/10})),B=l.a.div(D(),(function(t){return t.pixelSize/10})),Q=l.a.div(M(),(function(t){return t.stage?t.pixelSize:t.pixelSize/1.6})),Z=o.a.memo(l.a.div(L(),(function(t){return t.stage?t.pixelSize:t.pixelSize/1.6}),(function(t){return t.stage?t.pixelSize:t.pixelSize/1.6}),(function(t){return 1===t.fill?t.color:"inherited"}),(function(t){return t.hint?"inset 0 0 3px ".concat(t.playerColor,", inset 0 0 3px white"):"none"}),(function(t){return t.stage||t.fill||t.hint?"#222":"black"}),(function(t){return t.stage||t.fill||t.hint?"#222":"black"}))),F=l.a.div(N(),(function(t){return 8*t.pixelSize}),(function(t){return!t.portrait&&"height: ".concat(18*t.pixelSize+6,"px;")}),(function(t){return t.portrait&&"width: ".concat(10*t.pixelSize+10/3*1,"px;")}),(function(t){return t.portrait?0:t.pixelSize/3}),(function(t){return t.portrait?t.pixelSize/3:0}),(function(t){return t.portrait?"row":"column"}),(function(t){return t.portrait?"space-between":"flex-start"}),(function(t){return t.pixelSize})),T=function(t){var n=t.map,e=t.player,i=t.hint,c=t.status,u=Object(r.useState)(30),l=Object(a.a)(u,2),f=l[0],p=l[1],s=Object(r.useState)(!1),b=Object(a.a)(s,2),d=b[0],h=b[1],v=function(){var t=Object(r.useState)(O()),n=Object(a.a)(t,2),e=n[0],o=n[1];return Object(r.useEffect)((function(){function t(){o(O())}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),e}(),g=v.width,x=v.height;return Object(r.useEffect)((function(){var t=x/20,n=g/32;d&&(t=x/26,n=g/12),p(n<t?n:t),h(x>g)}),[g,x,d]),o.a.createElement(H,{portrait:d},e.next&&o.a.createElement(R,{portrait:d,pixelSize:f},o.a.createElement(Y,{pixelSize:f},function(t){var n=[],e={};t.forEach((function(t,r){var o=0;t.forEach((function(t){return o+=t})),o>0&&n.push(t),t.forEach((function(t,n){e[n]=(e[n]?e[n]:0)+t}))}));var r=[];return n.forEach((function(t,n){var o=[];t.forEach((function(t,n){e[n]>0&&o.push(t)})),r.push(o)})),r}(e.next.bloco).map((function(t,n){return o.a.createElement(Q,{pixelSize:f,key:"row-".concat(n)},t.map((function(t,n){return o.a.createElement(Z,{pixelSize:f,key:"pixel-".concat(n),fill:t,color:e.next.color})})))})))),n&&o.a.createElement(B,{pixelSize:f},n.map((function(t,n){return o.a.createElement(Q,{stage:"true",pixelSize:f,key:"row-".concat(n)},t.map((function(t,r){var c=e.bloco.bloco[n-e.pos[0]]&&e.bloco.bloco[n-e.pos[0]][r-e.pos[1]],a=i.bloco.bloco[n-i.pos[0]]&&i.bloco.bloco[n-i.pos[0]][r-i.pos[1]];return o.a.createElement(Z,{hint:a,pixelSize:f,stage:"true",key:"pixel-".concat(r),fill:t.fill|c,color:c?e.bloco.color:t.color,playerColor:e.bloco.color})})))}))),c&&o.a.createElement(F,{portrait:d,pixelSize:f},o.a.createElement(J,{portrait:d,borderSize:f/10,margin:f/3,padding:f/2,title:"SCORE",value:c.score}),o.a.createElement(J,{portrait:d,borderSize:f/10,margin:f/3,padding:f/2,title:"LEVEL",value:c.level}),o.a.createElement(J,{portrait:d,borderSize:f/10,margin:f/3,padding:f/2,title:"LINES",value:c.lines})))};function U(){var t=Object(u.a)(["\n\twidth: 100vw;\n\theight: 100vh;\n\tborder: 1px solid red;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n"]);return U=function(){return t},t}var V=l.a.div(U()),W=function(t,n){for(var e=n.map((function(t){return t.slice()})),r=0;r<t.bloco.bloco.length;r++)for(var o=0;o<t.bloco.bloco.length;o++)if(1===t.bloco.bloco[r][o]){var i=t.pos[0]+r,c=t.pos[1]+o;e[i][c]={fill:1,color:t.bloco.color}}return e},X=Object(v.a)(new Array(18)).map((function(){return Object(v.a)(new Array(10)).map((function(){return{fill:0,color:[]}}))})),q=["#e54b4b","#9a031e","#fcdc4d","#005397","#0bbcd6","#20ad65","#f8ebee"],G={bloco:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]},P={bloco:[[1,1],[1,1]]},$={bloco:[[0,0,0],[1,1,1],[0,1,0]]},_={bloco:[[0,1,0],[0,1,0],[1,1,0]]},tt={bloco:[[0,1,0],[0,1,0],[0,1,1]]},nt={bloco:[[0,1,1],[1,1,0],[0,0,0]]},et={bloco:[[1,1,0],[0,1,1],[0,0,0]]},rt=function(){var t=[G,P,$,_,tt,nt,et],n=t[Math.floor(Math.random()*t.length)];return n.color=q[Math.floor(Math.random()*q.length)],n},ot=function(t){var n,e;return t&&t.next&&(n=JSON.parse(JSON.stringify(t.next)),e=rt()),n||(n=rt()),e||(e=rt()),{pos:[0,Math.floor(4)],bloco:n,next:e}},it=function(){var t=Object(r.useState)(X),n=Object(a.a)(t,2),e=n[0],i=n[1],c=Object(r.useState)(),u=Object(a.a)(c,2),l=u[0],f=u[1],p=Object(r.useState)(!1),s=Object(a.a)(p,2),b=s[0],d=s[1],x=Object(r.useState)(!1),O=Object(a.a)(x,2),j=O[0],S=O[1],w=Object(r.useState)(Date.now()),E=Object(a.a)(w,2),k=E[0],z=E[1],y=Object(r.useState)(),C=Object(a.a)(y,2),J=C[0],N=C[1],L=Object(r.useState)(!0),M=Object(a.a)(L,2),D=M[0],I=M[1],K=Object(r.useState)(0),A=Object(a.a)(K,2),H=A[0],R=A[1],Y=Object(r.useState)(0),B=Object(a.a)(Y,2),Q=B[0],Z=B[1],F=Object(r.useState)(1),U=Object(a.a)(F,2),q=U[0],G=U[1],P=Object(r.useState)(0),$=Object(a.a)(P,2),_=$[0],tt=$[1],nt=Object(r.useState)(0),et=Object(a.a)(nt,2),rt=et[0],it=et[1];Object(r.useEffect)((function(){var t=q+1,n=1e3*t*t*t/5;console.log("Current level: ",q),console.log("Score to next level:",n),console.log("Remaining: ",n-Q),Q>=n&&G(q+1)}),[q,Q]);var ct=function(){i(X),R(0),Z(0),G(1)},at=function(){f(l?function(t){var n=bt("down");if(t.pos===n){i((function(n){var e=W(t,n);return ft(e)}));var e=ot(t);return pt(e.pos,e.bloco)||ct(),e}return Object(h.a)({},t,{pos:n})}:ot())},ut=function(){var t=JSON.parse(JSON.stringify(l)),n=t.bloco.bloco.map((function(n,e){return t.bloco.bloco.map((function(t){return t[e]}))}));n=n.map((function(t){return t.reverse()})),pt(l.pos,{bloco:n})&&f(Object(h.a)({},l,{bloco:Object(h.a)({},l.bloco,{bloco:n})}))},lt=function(){f((function(t){var n=JSON.parse(JSON.stringify(t));n.pos=Object(v.a)(J.pos),i((function(t){var e=W(n,t);return ft(e)}));var e=ot(t);return pt(e.pos,e.bloco)||ct(),e}))},ft=o.a.useCallback((function(t){var n=[];if(t.forEach((function(t,e){var r=!0;t.forEach((function(t,n){0===t.fill&&(r=!1)})),r&&n.push(e)})),n.length>0){var e=t.slice();n.forEach((function(t){for(var n=e.length-1;n>=0;n--)n<=t&&(e[n]=n>0?e[n-1]:Object(v.a)(new Array(10)).map((function(){return{fill:0,color:[]}})))})),R((function(t){return t+n.length}));var r=q*q*100,o=40*(n.length*n.length-1);return Z((function(t){return t+300*n.length+o+r})),e}return t}),[q]),pt=o.a.useCallback((function(t,n){for(var r=0;r<n.bloco.length;r++)for(var o=0;o<n.bloco[r].length;o++)if(1===n.bloco[r][o]){var i=t[0]+r,c=t[1]+o;if(i>18||c<0||c>10||!e[i]||!e[i][c]||1===e[i][c].fill)return!1}return!0}),[e]),st=o.a.useCallback((function(t){for(var n=JSON.parse(JSON.stringify(t.bloco)),e=Object(v.a)(t.pos);pt([e[0]+1,e[1]],n);)e=[e[0]+1,e[1]];return{pos:e,bloco:n}}),[pt]),bt=o.a.useCallback((function(t){var n;if(l)return"down"===t&&(n=[l.pos[0]+1,l.pos[1]]),"left"===t&&(n=[l.pos[0],l.pos[1]-1]),"right"===t&&(n=[l.pos[0],l.pos[1]+1]),pt(n,l.bloco)?n:l.pos}),[l,pt]);!function(t,n){var e=Object(r.useRef)();Object(r.useEffect)((function(){e.current=t}),[t]),Object(r.useEffect)((function(){if(null!==n){var t=setInterval((function(){e.current()}),n);return function(){return clearInterval(t)}}}),[n])}((function(){at()}),j?null:b?50:450-20*(q-1)),Object(r.useEffect)((function(){l&&N(st(l))}),[l,st]);var dt=Object(g.a)((function(t){var n=t.down,e=Object(a.a)(t.movement,2),r=e[0],o=e[1],i=t.velocity;n?(Math.abs(r-_)>20&&(f(r-_>0?function(t){return Object(h.a)({},t,{pos:bt("right")})}:function(t){return Object(h.a)({},t,{pos:bt("left")})}),tt(r)),Math.abs(o-rt)>20&&(i>1?D&&(I(!1),lt()):o-rt>0&&at(),it(o))):(tt(0),it(0),I(!0))}),{filterTaps:!0,lockDirection:!0});return l&&e&&J?o.a.createElement("div",Object.assign({onBlur:function(){return S(!0)},onFocus:function(){return S(!1)},tabIndex:"0",onKeyUp:function(t){var n=t.keyCode;40===n&&(d(!1),Date.now()-k<=80&&at()),32===n&&I(!0)},onKeyDown:function(t){switch(t.keyCode){case 37:f((function(t){return Object(h.a)({},t,{pos:bt("left")})}));break;case 38:ut();break;case 39:f((function(t){return Object(h.a)({},t,{pos:bt("right")})}));break;case 40:z(Date.now()),d(!0);break;case 32:D&&(I(!1),lt())}},onClick:function(){return ut()}},dt()),o.a.createElement(T,{map:e,player:l,hint:J,status:{lines:H,score:Q,level:q}})):o.a.createElement(V,null,o.a.createElement(m.a,{color:"#C41212"}))},ct=function(){var t=Object(r.useState)(!1),n=Object(a.a)(t,2),e=n[0],i=n[1];return e?o.a.createElement(it,{stopClick:function(){return i(!1)}}):o.a.createElement(d,{startClick:function(){return i(!0)}})};var at=document.getElementById("root");c.a.render(o.a.createElement((function(){return o.a.createElement(ct,null)}),null),at)}},[[19,1,2]]]);
//# sourceMappingURL=main.69f7d539.chunk.js.map