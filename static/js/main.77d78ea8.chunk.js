(this["webpackJsonpreact-tetris"]=this["webpackJsonpreact-tetris"]||[]).push([[0],{21:function(t,n,e){t.exports=e.p+"static/media/background.6255a470.jpg"},24:function(t,n,e){t.exports=e(43)},29:function(t,n,e){},30:function(t,n,e){},43:function(t,n,e){"use strict";e.r(n);var r=e(0),o=e.n(r),i=e(15),c=e.n(i),a=(e(29),e(30),e(1)),u=e(2),l=e(3);function f(){var t=Object(u.a)(['\n\tfont-size: 2.2em;\n\tfont-family: "ZCOOL QingKe HuangYou", cursive;\n\t/* border: 2px solid #222; */\n\tborder: none;\n\tpadding: 30px 100px;\n\tbackground-color: #fff;\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tvertical-align: middle;\n\ttext-decoration: none;\n\ttransition: all 0.5s;\n\tcolor: #95190c;\n\tborder-right: 1px solid #eee;\n\tborder-radius: 2px;\n\tborder-bottom: 1px solid #ccc;\n\n\t:focus {\n\t\toutline: 0;\n\t}\n\n\t:hover {\n\t\tmargin-left: 5px;\n\t\tmargin-top: 5px;\n\t\t::after {\n\t\t\tright: -5px;\n\t\t\ttop: 2px;\n\t\t\twidth: 5px;\n\t\t}\n\t\t::before {\n\t\t\tright: -3px;\n\t\t\theight: 5px;\n\t\t}\n\t}\n\n\t::after {\n\t\tcontent: "";\n\t\theight: 100%;\n\t\twidth: 10px;\n\t\tbackground-color: #eee;\n\t\tright: -10px;\n\t\ttop: 5px;\n\t\ttransform: skewY(45deg);\n\t\tposition: absolute;\n\t\ttransition: all 0.5s;\n\t}\n\n\t::before {\n\t\tcontent: "";\n\t\theight: 10px;\n\t\twidth: 100%;\n\t\tbackground-color: #ccc;\n\t\tright: -5px;\n\t\ttop: 95px;\n\t\ttransform: skewX(45deg);\n\t\tposition: absolute;\n\t\ttransition: all 0.5s;\n\t}\n']);return f=function(){return t},t}function p(){var t=Object(u.a)(["\n\twidth: 100vw;\n\theight: 100vh;\n\toverflow: hidden;\n\tbackground-color: #e3b505;\n"]);return p=function(){return t},t}var s=l.a.div(p()),b=l.a.button(f()),d=function(t){var n=t.startClick;return o.a.createElement(s,null,o.a.createElement(b,{onClick:n},"Start"))},h=e(4),g=e(5),x=e(22),v=e(18),m=e.n(v),O=e(23),j=e(20),S=e.n(j);function w(){var t=window;return{width:t.innerWidth,height:t.innerHeight}}var k=e(21),z=e.n(k);function E(){var t=Object(u.a)(["\n\twidth: 100%;\n\ttext-align: center;\n\tcolor: white;\n"]);return E=function(){return t},t}function y(){var t=Object(u.a)(["\n\twidth: 100%;\n\ttext-align: center;\n\tcolor: white;\n"]);return y=function(){return t},t}function C(){var t=Object(u.a)(["\n\tbackground-color: ",";\n\ttransition: background-color 0.5s;\n\tborder: ","px solid white;\n\t",'\n\tfont-family: "ZCOOL QingKe HuangYou", cursive;\n\tpadding: ',"px\n\t\t","px; /*15*/\n\tmargin-bottom: ","px; /*10*/\n"]);return C=function(){return t},t}var I=l.a.div(C(),(function(t){return t.backgroundColor?t.backgroundColor:"black"}),(function(t){return t.borderSize?t.borderSize:"3"}),(function(t){return!t.portrait&&"width: 100%;"}),(function(t){return t.padding?t.padding:"15"}),(function(t){return t.portrait?t.padding/2:0}),(function(t){return t.margin?t.margin:"10"})),J=l.a.div(y()),N=l.a.div(E()),L=function(t){var n=t.title,e=t.value,r=t.padding,i=t.margin,c=t.borderSize,a=t.portrait,u=t.backgroundColor;return o.a.createElement(I,{portrait:a,padding:r,margin:i,borderSize:c,backgroundColor:u},o.a.createElement(J,null,n),o.a.createElement(N,null,e))},M=e(11),B=e.n(M);function D(){var t=Object(u.a)(["\n\twidth: ","px;\n\t","\n\t","\n\tmargin-left: ","px;\n\tmargin-top: ","px;\n\tdisplay: flex;\n\tflex-direction: ",";\n\talign-items: center;\n\tjustify-content: ",";\n\tfont-size: ","px;\n"]);return D=function(){return t},t}function K(){var t=Object(u.a)(["\n\t",";\n"]);return K=function(){return t},t}function A(){var t=Object(u.a)(["\n\twidth: ","px;\n\theight: ","px;\n\tbackground-color: ",";\n\tposition: relative;\n\tz-index: ",";\n\n\t",";\n\n\t",";\n\n\t",";\n\n\t",";\n"]);return A=function(){return t},t}function H(){var t=Object(u.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: center;\n\theight: ","px;\n"]);return H=function(){return t},t}function R(){var t=Object(u.a)(["\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"]);return R=function(){return t},t}function Y(){var t=Object(u.a)(["\n\tborder: ","px solid white;\n\tbackground-color: ",";\n\ttransition: background-color 0.5s;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n"]);return Y=function(){return t},t}function Q(){var t=Object(u.a)(["\n\twidth: ","px;\n\theight: ","px;\n\tbackground-color: ",";\n\ttransition: background-color 0.5;\n\tborder: ","px solid white;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\tmargin-bottom: ","px;\n\tmargin-right: ","px;\n"]);return Q=function(){return t},t}function Z(){var t=Object(u.a)(["\n\t","\n\t","\n\tmargin-right: ","px;\n\tmargin-bottom: ","px;\n\tdisplay: flex;\n\tflex-direction: ",";\n\tjustify-content: ",";\n\talign-items: center;\n"]);return Z=function(){return t},t}function F(){var t=Object(u.a)(["\n\twidth: 100vw;\n\theight: ","vh;\n\tdisplay: flex;\n\tflex-direction: ",";\n\tjustify-content: center;\n\talign-items: center;\n\tbackground-image: url(",");\n\tbackground-size: cover;\n\tbackground-position: center;\n"]);return F=function(){return t},t}var T=l.a.div(F(),(function(t){return t.portrait?"95":"100"}),(function(t){return t.portrait?"column":"row"}),z.a),U=l.a.div(Z(),(function(t){return!t.portrait&&"height: ".concat(18*t.pixelSize+6,"px;")}),(function(t){return t.portrait&&"width: ".concat(10*t.pixelSize+10/3*1,"px;")}),(function(t){return t.portrait?0:t.pixelSize/3}),(function(t){return t.portrait?t.pixelSize/3:0}),(function(t){return t.portrait?"row":"column"}),(function(t){return t.portrait?"space-between":"flex-start"})),V=l.a.div(Q(),(function(t){return 3*t.pixelSize}),(function(t){return 3*t.pixelSize}),(function(t){return t.theme3d?"#444":"black"}),(function(t){return t.pixelSize/10}),(function(t){return t.portrait?0:t.pixelSize/3}),(function(t){return t.portrait?t.pixelSize/3:0})),W=l.a.div(Y(),(function(t){return t.pixelSize/10}),(function(t){return t.theme3d?"#444":"black"})),X=l.a.div(R()),q=l.a.div(H(),(function(t){return t.stage?t.pixelSize:t.pixelSize/1.6})),G=o.a.memo(l.a.div(A(),(function(t){return t.stage?t.pixelSize:t.pixelSize/1.6}),(function(t){return t.stage?t.pixelSize:t.pixelSize/1.6}),(function(t){return 1===t.fill?t.color:"inherited"}),(function(t){return t.zIndex}),(function(t){return t.paused&&"\n\t\ttransition: all 1s;\n\t"}),(function(t){return t.fill&&t.theme3d&&";\n\t\tbox-shadow: ".concat(t.pixelSize/4.16,"px ").concat(t.pixelSize/4.16,"px ").concat(t.pixelSize/5.55,"px #222").concat(t.topBloco?", 0 ".concat(-t.pixelSize/4.16,"px 0 ").concat(B()(t.color).lighten(.2)):""," \n\t")}),(function(t){return!t.theme3d&&"\n\t\tborder-left: 1px solid ".concat(t.stage||t.fill||t.hint?"#222":"black",";\n\t\tborder-top: 1px solid ").concat(t.stage||t.fill||t.hint?"#222":"black",";\t\n\t")}),(function(t){return t.hint&&"\n\t\tborder: 1px solid ".concat(B()(t.playerColor).alpha(.5),";\n\t\tbackground-color: rgba(255,255,255,0.1);\n\t")}))),P=l.a.div(K(),(function(t){return t.portrait&&"\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\talign-items: flex-end;\n\t\tflex-direction: column;\n\t\tjustify-content: flex-end;\n\t"})),$=l.a.div(D(),(function(t){return 8*t.pixelSize}),(function(t){return!t.portrait&&"height: ".concat(18*t.pixelSize+6,"px;")}),(function(t){return t.portrait&&"width: ".concat(10*t.pixelSize+10/3*1,"px;")}),(function(t){return t.portrait?0:t.pixelSize/3}),(function(t){return t.portrait?t.pixelSize/3:0}),(function(t){return t.portrait?"row":"column"}),(function(t){return t.portrait?"space-between":"flex-start"}),(function(t){return t.pixelSize})),_=function(t){var n=t.map,e=t.player,i=t.hint,c=t.status,u=t.paused,l=Object(O.a)(t,["map","player","hint","status","paused"]),f=Object(r.useState)(30),p=Object(a.a)(f,2),s=p[0],b=p[1],d=Object(r.useState)(!1),h=Object(a.a)(d,2),g=h[0],x=h[1],v=function(){var t=Object(r.useState)(w()),n=Object(a.a)(t,2),e=n[0],o=n[1];return Object(r.useEffect)((function(){function t(){o(w())}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),e}(),m=v.width,j=v.height,k=Object(r.useState)(!1),z=Object(a.a)(k,2),E=z[0],y=z[1],C=Object(r.useState)(),I=Object(a.a)(C,2),J=I[0],N=I[1];return Object(r.useEffect)((function(){var t=j/20,n=m/32;g&&(t=j/26,n=m/12),b(n<t?n:t),x(j>m)}),[m,j,g]),Object(r.useEffect)((function(){e.next&&N(function(t){var n=[],e={};t.forEach((function(t,r){var o=0;t.forEach((function(t){return o+=t})),o>0&&n.push(t),t.forEach((function(t,n){e[n]=(e[n]?e[n]:0)+t}))}));var r=[];return n.forEach((function(t,n){var o=[];t.forEach((function(t,n){e[n]>0&&o.push(t)})),r.push(o)})),r}(e.next.bloco))}),[e.next]),o.a.createElement(T,{portrait:g},J&&o.a.createElement(U,{portrait:g,pixelSize:s},o.a.createElement(V,{portrait:g,theme3d:E,pixelSize:s},J.map((function(t,n){return o.a.createElement(q,{pixelSize:s,key:"row-".concat(n)},t.map((function(t,r){var i=t&&(!J[n-1]||!J[n-1][r]);return o.a.createElement(G,{paused:u,theme3d:E,topBloco:i,zIndex:n,pixelSize:s,key:"pixel-".concat(r),fill:t,color:e.next.color})})))}))),o.a.createElement(P,{portrait:g},o.a.createElement(S.a,{width:2*s,height:s/1.2,onChange:y,checked:E,offColor:"#000",onColor:"#444",uncheckedIcon:o.a.createElement(X,null,o.a.createElement(G,{theme3d:!1,pixelSize:s/3,stage:"true",fill:1,color:"#e54b4b"})),checkedIcon:o.a.createElement(X,null,o.a.createElement(G,{theme3d:"true",pixelSize:s/3,stage:"true",fill:1,color:"#e54b4b",topBloco:"true"}))}))),n&&o.a.createElement(W,Object.assign({},l,{theme3d:E,pixelSize:s}),n.map((function(t,r){return o.a.createElement(q,{stage:"true",pixelSize:s,key:"row-".concat(r)},t.map((function(t,c){var a=e.bloco.bloco[r-e.pos[0]]&&e.bloco.bloco[r-e.pos[0]][c-e.pos[1]],l=i.bloco.bloco[r-i.pos[0]]&&i.bloco.bloco[r-i.pos[0]][c-i.pos[1]],f=(a||t.fill)&&(!e.bloco.bloco[r-e.pos[0]-1]||!e.bloco.bloco[r-e.pos[0]-1][c-e.pos[1]])&&(!n[r-1]||!n[r-1][c].fill),p=a||t.fill||!l?r:99;return o.a.createElement(G,{paused:u,theme3d:E,hint:!t.fill&&!a&&l,pixelSize:s,stage:"true",key:"pixel-".concat(c),fill:t.fill||a,color:a?e.bloco.color:t.color,playerColor:e.bloco.color,topBloco:f,zIndex:p})})))}))),c&&o.a.createElement($,{portrait:g,pixelSize:s},o.a.createElement(L,{backgroundColor:E?"#444":"black",portrait:g,borderSize:s/10,margin:s/3,padding:s/2,title:"SCORE",value:c.score}),o.a.createElement(L,{backgroundColor:E?"#444":"black",portrait:g,borderSize:s/10,margin:s/3,padding:s/2,title:"LEVEL",value:c.level}),o.a.createElement(L,{backgroundColor:E?"#444":"black",portrait:g,borderSize:s/10,margin:s/3,padding:s/2,title:"LINES",value:c.lines})))};function tt(){var t=Object(u.a)(["\n\twidth: 100vw;\n\theight: 100vh;\n\tborder: 1px solid red;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n"]);return tt=function(){return t},t}var nt=l.a.div(tt()),et=function(t,n){for(var e=n.map((function(t){return t.slice()})),r=0;r<t.bloco.bloco.length;r++)for(var o=0;o<t.bloco.bloco.length;o++)if(1===t.bloco.bloco[r][o]){var i=t.pos[0]+r,c=t.pos[1]+o;e[i][c]={fill:1,color:t.bloco.color}}return e},rt=Object(g.a)(new Array(18)).map((function(){return Object(g.a)(new Array(10)).map((function(){return{fill:0,color:[]}}))})),ot=["#e54b4b","#9a031e","#fcdc4d","#005397","#0bbcd6","#20ad65","#f8ebee"],it={bloco:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]},ct={bloco:[[1,1],[1,1]]},at={bloco:[[0,0,0],[1,1,1],[0,1,0]]},ut={bloco:[[0,1,0],[0,1,0],[1,1,0]]},lt={bloco:[[0,1,0],[0,1,0],[0,1,1]]},ft={bloco:[[0,1,1],[1,1,0],[0,0,0]]},pt={bloco:[[1,1,0],[0,1,1],[0,0,0]]},st=function(){var t=[it,ct,at,ut,lt,ft,pt],n=t[Math.floor(Math.random()*t.length)];return n.color=ot[Math.floor(Math.random()*ot.length)],n},bt=function(t){var n,e;return t&&t.next&&(n=JSON.parse(JSON.stringify(t.next)),e=st()),n||(n=st()),e||(e=st()),{pos:[0,Math.floor(4)],bloco:n,next:e}},dt=function(){var t=Object(r.useState)(rt),n=Object(a.a)(t,2),e=n[0],i=n[1],c=Object(r.useState)(),u=Object(a.a)(c,2),l=u[0],f=u[1],p=Object(r.useState)(!1),s=Object(a.a)(p,2),b=s[0],d=s[1],v=Object(r.useState)(!1),O=Object(a.a)(v,2),j=O[0],S=O[1],w=Object(r.useState)(Date.now()),k=Object(a.a)(w,2),z=k[0],E=k[1],y=Object(r.useState)(),C=Object(a.a)(y,2),I=C[0],J=C[1],N=Object(r.useState)(!0),L=Object(a.a)(N,2),M=L[0],B=L[1],D=Object(r.useState)(0),K=Object(a.a)(D,2),A=K[0],H=K[1],R=Object(r.useState)(0),Y=Object(a.a)(R,2),Q=Y[0],Z=Y[1],F=Object(r.useState)(1),T=Object(a.a)(F,2),U=T[0],V=T[1],W=Object(r.useState)(0),X=Object(a.a)(W,2),q=X[0],G=X[1],P=Object(r.useState)(0),$=Object(a.a)(P,2),tt=$[0],ot=$[1];Object(r.useEffect)((function(){var t=U+1,n=1e3*t*t*t/5;console.log("Current level: ",U),console.log("Score to next level:",n),console.log("Remaining: ",n-Q),Q>=n&&V(U+1)}),[U,Q]);var it=function(){i(rt),H(0),Z(0),V(1)},ct=function(){f(l?function(t){var n=st("down");if(t.pos===n){i((function(n){var e=et(t,n);return lt(e)}));var e=bt(t);return ft(e.pos,e.bloco)||it(),e}return Object(h.a)({},t,{pos:n})}:bt())},at=function(){var t=JSON.parse(JSON.stringify(l)),n=t.bloco.bloco.map((function(n,e){return t.bloco.bloco.map((function(t){return t[e]}))}));n=n.map((function(t){return t.reverse()})),ft(l.pos,{bloco:n})&&f(Object(h.a)({},l,{bloco:Object(h.a)({},l.bloco,{bloco:n})}))},ut=function(){f((function(t){var n=JSON.parse(JSON.stringify(t));n.pos=Object(g.a)(I.pos),i((function(t){var e=et(n,t);return lt(e)}));var e=bt(t);return ft(e.pos,e.bloco)||it(),e}))},lt=o.a.useCallback((function(t){var n=[];if(t.forEach((function(t,e){var r=!0;t.forEach((function(t,n){0===t.fill&&(r=!1)})),r&&n.push(e)})),n.length>0){var e=t.slice();n.forEach((function(t){for(var n=e.length-1;n>=0;n--)n<=t&&(e[n]=n>0?e[n-1]:Object(g.a)(new Array(10)).map((function(){return{fill:0,color:[]}})))})),H((function(t){return t+n.length}));var r=U*U*100,o=40*(n.length*n.length-1);return Z((function(t){return t+300*n.length+o+r})),e}return t}),[U]),ft=o.a.useCallback((function(t,n){for(var r=0;r<n.bloco.length;r++)for(var o=0;o<n.bloco[r].length;o++)if(1===n.bloco[r][o]){var i=t[0]+r,c=t[1]+o;if(i>18||c<0||c>10||!e[i]||!e[i][c]||1===e[i][c].fill)return!1}return!0}),[e]),pt=o.a.useCallback((function(t){for(var n=JSON.parse(JSON.stringify(t.bloco)),e=Object(g.a)(t.pos);ft([e[0]+1,e[1]],n);)e=[e[0]+1,e[1]];return{pos:e,bloco:n}}),[ft]),st=o.a.useCallback((function(t){var n;if(l)return"down"===t&&(n=[l.pos[0]+1,l.pos[1]]),"left"===t&&(n=[l.pos[0],l.pos[1]-1]),"right"===t&&(n=[l.pos[0],l.pos[1]+1]),ft(n,l.bloco)?n:l.pos}),[l,ft]);!function(t,n){var e=Object(r.useRef)();Object(r.useEffect)((function(){e.current=t}),[t]),Object(r.useEffect)((function(){if(null!==n){var t=setInterval((function(){e.current()}),n);return function(){return clearInterval(t)}}}),[n])}((function(){ct()}),j?null:b?50:450-20*(U-1)),Object(r.useEffect)((function(){l&&J(pt(l))}),[l,pt]);var dt=Object(x.a)((function(t){var n=t.down,e=Object(a.a)(t.movement,2),r=e[0],o=e[1],i=t.velocity;n?(Math.abs(r-q)>20&&(f(r-q>0?function(t){return Object(h.a)({},t,{pos:st("right")})}:function(t){return Object(h.a)({},t,{pos:st("left")})}),G(r)),Math.abs(o-tt)>20&&(i>1?M&&(B(!1),ut()):o-tt>0&&ct(),ot(o))):(G(0),ot(0),B(!0))}),{filterTaps:!0,lockDirection:!0});return l&&e&&I?o.a.createElement(_,Object.assign({map:e,player:l,hint:I,paused:j,status:{lines:A,score:Q,level:U},onBlur:function(){return S(!0)},onFocus:function(){return S(!1)},tabIndex:"0",onKeyUp:function(t){var n=t.keyCode;40===n&&(d(!1),Date.now()-z<=80&&ct()),32===n&&B(!0)},onKeyDown:function(t){switch(t.keyCode){case 37:f((function(t){return Object(h.a)({},t,{pos:st("left")})}));break;case 38:at();break;case 39:f((function(t){return Object(h.a)({},t,{pos:st("right")})}));break;case 40:E(Date.now()),d(!0);break;case 32:M&&(B(!1),ut())}},onClick:function(){return at()}},dt())):o.a.createElement(nt,null,o.a.createElement(m.a,{color:"#C41212"}))},ht=function(){var t=Object(r.useState)(!0),n=Object(a.a)(t,2),e=n[0],i=n[1];return e?o.a.createElement(dt,{stopClick:function(){return i(!1)}}):o.a.createElement(d,{startClick:function(){return i(!0)}})};var gt=document.getElementById("root");c.a.render(o.a.createElement((function(){return o.a.createElement(ht,null)}),null),gt)}},[[24,1,2]]]);
//# sourceMappingURL=main.77d78ea8.chunk.js.map