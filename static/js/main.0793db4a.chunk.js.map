{"version":3,"sources":["images/background.jpg","components/StartPage/index.js","hooks/useWindowDimensions.js","components/StatusRow/index.js","components/Stage/index.js","utils/Utils.js","components/Game/index.js","hooks/useInterval.js","components/Tetris/index.js","index.js","App.js"],"names":["module","exports","StyledStartPage","styled","div","StartButton","button","StartPage","startClick","onClick","getWindowDimensions","window","width","innerWidth","height","innerHeight","Container","props","borderSize","portrait","padding","margin","Title","Value","StatusRow","title","value","Game","background","ContainerNext","pixelSize","Next","StyledStage","Row","stage","Pixel","React","memo","fill","color","hint","playerColor","ContainerStatus","Stage","map","player","status","useState","setPixelSize","setPortrait","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","useWindowDimensions","pixelSizeHeight","pixelSizeWidth","next","bloco","trimRowBloco","sumColumn","forEach","row","y","rowSum","pixel","push","x","trimBloco","newRow","getRenderizacaoBloco","key","playerFill","pos","playerHint","score","level","lines","PrintPlayerInMap","newMap","arr","slice","length","pixelY","pixelX","initialMap","Array","colors","I","O","T","J","L","S","Z","getRandomBloco","blocos","Math","floor","random","getRandomPlayer","JSON","parse","stringify","STAGE_WIDTH","setMap","setPlayer","down","setDown","pause","setPause","Date","now","tick","setTick","hintPlayer","setHintPlayer","spaceReleased","setSpaceReleased","setlines","setScore","setLevel","dragX","setDragX","dragY","setDragY","nextLevel","nextLevelScore","console","log","loseGame","drop","newPos","getNewPlayerPos","mapWithPlayer","checkMap","newPlayer","validatePosition","rotatePlayer","clonedPlayer","mtrx","_","index","column","reverse","forwardDown","playerCopy","useCallback","rowsClear","clear","mapY","quant","bonusLevel","bonusRows","mapX","calculateHintPlayer","hintBloco","hintPosition","movement","callback","delay","savedCallback","useRef","current","id","setInterval","clearInterval","useInterval","bind","useDrag","mx","my","velocity","abs","filterTaps","lockDirection","onBlur","onFocus","tabIndex","onKeyUp","keyCode","onKeyDown","Tetris","runing","setRuning","stopClick","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.0793db4a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/background.6255a470.jpg\";","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst StyledStartPage = styled.div`\r\n\twidth: 100vw;\r\n\theight: 100vh;\r\n\toverflow: hidden;\r\n\tbackground-color: #e3b505;\r\n`;\r\n\r\nconst StartButton = styled.button`\r\n\tfont-size: 2.2em;\r\n\tfont-family: \"ZCOOL QingKe HuangYou\", cursive;\r\n\t/* border: 2px solid #222; */\r\n\tborder: none;\r\n\tpadding: 30px 100px;\r\n\tbackground-color: #fff;\r\n\tposition: absolute;\r\n\ttop: 50%;\r\n\tleft: 50%;\r\n\ttransform: translate(-50%, -50%);\r\n\tvertical-align: middle;\r\n\ttext-decoration: none;\r\n\ttransition: all 0.5s;\r\n\tcolor: #95190c;\r\n\tborder-right: 1px solid #eee;\r\n\tborder-radius: 2px;\r\n\tborder-bottom: 1px solid #ccc;\r\n\r\n\t:focus {\r\n\t\toutline: 0;\r\n\t}\r\n\r\n\t:hover {\r\n\t\tmargin-left: 5px;\r\n\t\tmargin-top: 5px;\r\n\t\t::after {\r\n\t\t\tright: -5px;\r\n\t\t\ttop: 2px;\r\n\t\t\twidth: 5px;\r\n\t\t}\r\n\t\t::before {\r\n\t\t\tright: -3px;\r\n\t\t\theight: 5px;\r\n\t\t}\r\n\t}\r\n\r\n\t::after {\r\n\t\tcontent: \"\";\r\n\t\theight: 100%;\r\n\t\twidth: 10px;\r\n\t\tbackground-color: #eee;\r\n\t\tright: -10px;\r\n\t\ttop: 5px;\r\n\t\ttransform: skewY(45deg);\r\n\t\tposition: absolute;\r\n\t\ttransition: all 0.5s;\r\n\t}\r\n\r\n\t::before {\r\n\t\tcontent: \"\";\r\n\t\theight: 10px;\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #ccc;\r\n\t\tright: -5px;\r\n\t\ttop: 95px;\r\n\t\ttransform: skewX(45deg);\r\n\t\tposition: absolute;\r\n\t\ttransition: all 0.5s;\r\n\t}\r\n`;\r\n\r\nconst StartPage = ({ startClick }) => {\r\n\treturn (\r\n\t\t<StyledStartPage>\r\n\t\t\t<StartButton onClick={startClick}>Start</StartButton>\r\n\t\t</StyledStartPage>\r\n\t);\r\n};\r\nexport default StartPage;\r\n","import { useState, useEffect } from 'react';\r\n\r\nfunction getWindowDimensions() {\r\n  const { innerWidth: width, innerHeight: height } = window;\r\n  return {\r\n    width,\r\n    height\r\n  };\r\n}\r\n\r\nexport default function useWindowDimensions() {\r\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setWindowDimensions(getWindowDimensions());\r\n    }\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return windowDimensions;\r\n}","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Container = styled.div`\r\n\tbackground-color: black;\r\n\tborder: ${props => props.borderSize ? props.borderSize : '3'}px solid white;\r\n\t${props => !props.portrait && `width: 100%;`}\r\n\tfont-family: \"ZCOOL QingKe HuangYou\", cursive;\r\n\tpadding: ${props => props.padding ? props.padding : '15'}px ${props => props.portrait ? props.padding/2 : 0}px; /*15*/\r\n\tmargin-bottom: ${props => props.margin ? props.margin : '10'}px; /*10*/ \r\n`;\r\n\r\nconst Title = styled.div`\r\n\twidth: 100%;\r\n\ttext-align: center;\r\n\tcolor: white;\r\n`;\r\n\r\nconst Value = styled.div`\r\n\twidth: 100%;\r\n\ttext-align: center;\r\n\tcolor: white;\r\n`;\r\n\r\nconst StatusRow = ({title, value, padding, margin, borderSize, portrait}) => (\r\n\t<Container portrait={portrait} padding={padding} margin={margin} borderSize={borderSize}>\r\n\t\t<Title>\r\n\t\t\t{title}\r\n\t\t</Title>\r\n\t\t<Value>\r\n\t\t\t{value}\r\n\t\t</Value>\r\n\t</Container>\r\n);\r\n\r\n\r\nexport default StatusRow;","import React, {useState, useEffect} from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport useWindowDimensions from '../../hooks/useWindowDimensions';\r\nimport background from \"../../images/background.jpg\";\r\nimport StatusRow from '../StatusRow';\r\n\r\nconst Game = styled.div`\r\n\twidth: 100vw;\r\n\theight: ${props => props.portrait ? '95' : '100'}vh;\r\n\tdisplay: flex;\r\n\tflex-direction: ${props => props.portrait ? 'column' : 'row'};\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tbackground-image: url(${background});\r\n\tbackground-size: cover;\r\n\tbackground-position: center;\r\n`;\r\n\r\nconst ContainerNext = styled.div`\r\n\t${props => !props.portrait && `height: ${(props.pixelSize * 18) + ((18 / 3) * 1)}px;` }\r\n\t${props => props.portrait && `width: ${(props.pixelSize * 10) + ((10 / 3) * 1)}px;` }\r\n\tmargin-right: ${props => props.portrait ? 0 : props.pixelSize / 3}px;\r\n\tmargin-bottom: ${props => props.portrait ? props.pixelSize / 3 : 0}px;\r\n`;\r\n\r\nconst Next = styled.div`\r\n\twidth: ${props => props.pixelSize * 3}px;\r\n\theight: ${props => props.pixelSize * 3}px;\r\n\tbackground-color: black;\r\n\tborder: ${props => props.pixelSize / 10}px solid white;\r\n\toverflow: hidden;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n`;\r\n\r\nconst StyledStage = styled.div`\r\n\tborder: ${props => props.pixelSize / 10}px solid white;\r\n\tbackground-color: black;\r\n\toverflow: hidden;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n`;\r\n\r\nconst Row = styled.div`\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tjustify-content: center;\r\n\theight: ${props => props.stage ? props.pixelSize : props.pixelSize / 1.6}px;\r\n`;\r\n\r\nconst Pixel = React.memo(styled.div`\r\n  width: ${props => props.stage ? props.pixelSize : props.pixelSize / 1.6}px;\r\n  height: ${props => props.stage ? props.pixelSize : props.pixelSize / 1.6}px;\r\n  background-color: ${props =>\r\n\t\t\tprops.fill === 1\r\n\t\t\t\t? props.color\r\n\t\t\t\t: \"inherited\"};\r\n\tbox-shadow: ${props => \r\n\t\t\tprops.hint \r\n\t\t\t? `inset 0 0 3px ${props.playerColor}, inset 0 0 3px white`\r\n\t\t\t: 'none'};\r\n\tborder-left: 1px solid ${props => props.stage || props.fill || props.hint ? '#222' : 'black'};\r\n\tborder-top: 1px solid ${props => props.stage || props.fill || props.hint ? '#222' : 'black'};\r\n`);\r\n\r\nconst ContainerStatus = styled.div`\r\n\twidth: ${props => props.pixelSize * 8}px;\r\n\t${props => !props.portrait && `height: ${(props.pixelSize * 18) + ((18 / 3) * 1)}px;` }\r\n\t${props => props.portrait && `width: ${(props.pixelSize * 10) + ((10 / 3) * 1)}px;` }\r\n\tmargin-left: ${props => props.portrait ? 0 : props.pixelSize / 3}px;\r\n\tmargin-top: ${props => props.portrait ? props.pixelSize / 3 : 0}px;\r\n\tdisplay: flex;\r\n\tflex-direction: ${props => props.portrait ? 'row' : 'column'};\r\n\talign-items: center;\r\n\tjustify-content: ${props => props.portrait ? 'space-between' : 'flex-start'};\r\n\tfont-size: ${props => props.pixelSize}px;\r\n`;\r\n\r\nconst getRenderizacaoBloco = bloco => {\r\n\tlet trimRowBloco = [];\r\n\tlet sumColumn = {};\r\n\tbloco.forEach((row, y) => {\r\n\t\tlet rowSum = 0;\r\n\t\trow.forEach(pixel => rowSum = rowSum + pixel);\r\n\t\tif (rowSum > 0)\r\n\t\t\ttrimRowBloco.push(row);\r\n\t\trow.forEach((pixel, x) => {\r\n\t\t\tsumColumn[x] = (sumColumn[x] ? sumColumn[x] : 0) + pixel;\r\n\t\t});\r\n\t});\r\n\tlet trimBloco = [];\r\n\ttrimRowBloco.forEach((row, y) => {\r\n\t\tlet newRow = [];\r\n\t\trow.forEach((pixel, x) => {\r\n\t\t\tif (sumColumn[x] > 0)\r\n\t\t\t\tnewRow.push(pixel);\r\n\t\t})\r\n\t\ttrimBloco.push(newRow);\r\n\t});\r\n\treturn trimBloco;\r\n}\r\n\r\nconst Stage = ({ map, player, hint, status }) => {\r\n\t\r\n\tconst [pixelSize, setPixelSize] = useState(30);\r\n\tconst [portrait, setPortrait] = useState(false);\r\n\tconst { width, height } = useWindowDimensions();\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet pixelSizeHeight = height / 20;\r\n\t\tlet pixelSizeWidth  = width / 32;\r\n\t\tif (portrait) {\r\n\t\t\tpixelSizeHeight = height / 26;\r\n\t\t\tpixelSizeWidth  = width / 12;\r\n\t\t}\r\n\t\tsetPixelSize(pixelSizeWidth < pixelSizeHeight ? pixelSizeWidth : pixelSizeHeight);\r\n\t\tsetPortrait(height > width);\r\n\t}, [width, height, portrait]);\r\n\r\n\treturn (\r\n\t\t<Game portrait={portrait}>\r\n\t\t\t{player.next && (\r\n\t\t\t\t<ContainerNext portrait={portrait} pixelSize={pixelSize}>\r\n\t\t\t\t\t<Next pixelSize={pixelSize}>\r\n\t\t\t\t\t\t{getRenderizacaoBloco(player.next.bloco).map((row, y) => (\r\n\t\t\t\t\t\t\t<Row pixelSize={pixelSize} key={`row-${y}`}>\r\n\t\t\t\t\t\t\t\t{row.map((pixel, x) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Pixel pixelSize={pixelSize} key={`pixel-${x}`} fill={pixel} color={player.next.color} />\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Next>\r\n\t\t\t\t</ContainerNext>\r\n\t\t\t)}\r\n\t\t\t{map && (\r\n\t\t\t\t<StyledStage pixelSize={pixelSize}>\r\n\t\t\t\t\t{map.map((row, y) => (\r\n\t\t\t\t\t\t<Row stage='true' pixelSize={pixelSize} key={`row-${y}`}>\r\n\t\t\t\t\t\t\t{row.map((pixel, x) => {\r\n\t\t\t\t\t\t\t\tlet playerFill =\r\n\t\t\t\t\t\t\t\t\tplayer.bloco.bloco[y - player.pos[0]] &&\r\n\t\t\t\t\t\t\t\t\tplayer.bloco.bloco[y - player.pos[0]][x - player.pos[1]];\r\n\t\t\t\t\t\t\t\tlet playerHint =\r\n\t\t\t\t\t\t\t\t\thint.bloco.bloco[y - hint.pos[0]] &&\r\n\t\t\t\t\t\t\t\t\thint.bloco.bloco[y - hint.pos[0]][x - hint.pos[1]];\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Pixel \r\n\t\t\t\t\t\t\t\t\t\thint={playerHint}\r\n\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize}\r\n\t\t\t\t\t\t\t\t\t\tstage='true'\r\n\t\t\t\t\t\t\t\t\t\tkey={`pixel-${x}`}\r\n\t\t\t\t\t\t\t\t\t\tfill={pixel.fill | playerFill}\r\n\t\t\t\t\t\t\t\t\t\tcolor={playerFill ? player.bloco.color : pixel.color}\r\n\t\t\t\t\t\t\t\t\t\tplayerColor={player.bloco.color}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t</Pixel>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</StyledStage>\r\n\t\t\t)}\r\n\t\t\t{status && \r\n\t\t\t\t<ContainerStatus portrait={portrait} pixelSize={pixelSize}>\r\n\t\t\t\t\t<StatusRow portrait={portrait} borderSize={pixelSize/10} margin={pixelSize/3} padding={pixelSize/2} title='SCORE' value={status.score} />\r\n\t\t\t\t\t<StatusRow portrait={portrait} borderSize={pixelSize/10} margin={pixelSize/3} padding={pixelSize/2} title='LEVEL' value={status.level} />\r\n\t\t\t\t\t<StatusRow portrait={portrait} borderSize={pixelSize/10} margin={pixelSize/3} padding={pixelSize/2} title='LINES' value={status.lines} />\r\n\t\t\t\t</ContainerStatus>}\r\n\t</Game>\r\n\t);\r\n};\r\n\r\nexport default Stage;\r\n","export const PrintPlayerInMap = (player, map) => {\r\n  var newMap = map.map(arr => arr.slice());\r\n  for (let y = 0; y < player.bloco.bloco.length; y++)\r\n    for (let x = 0; x < player.bloco.bloco.length; x++)\r\n      if (player.bloco.bloco[y][x] === 1) {\r\n        const pixelY = player.pos[0] + y;\r\n        const pixelX = player.pos[1] + x;\r\n        newMap[pixelY][pixelX] = { fill: 1, color: player.bloco.color };\r\n      }\r\n  return newMap;\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useDrag } from \"react-use-gesture\";\r\n\r\nimport Stage from \"../Stage\";\r\nimport { useInterval } from \"../../hooks/useInterval\";\r\n\r\nimport { PrintPlayerInMap } from \"../../utils/Utils\";\r\n\r\n//TODO: Alterar OnClick (rotatePlayer) para OnFastClick (criar hook)\r\n//TODO: Organização do componente \"Game\" (Separar codigo em hooks, outros components e funcoes)\r\n//TODO: Dar um tempo quando o bloco estiver no chão, mas o usuário mexendo\r\n//TODO: Add stage themes\r\n\r\nconst STAGE_HEIGHT = 18;\r\nconst STAGE_WIDTH = 10;\r\n\r\nconst initialMap = [...new Array(STAGE_HEIGHT)].map(() =>\r\n\t[...new Array(STAGE_WIDTH)].map(() => ({ fill: 0, color: [] }))\r\n);\r\n\r\nconst colors = [\r\n\t\"#e54b4b\",\r\n\t\"#9a031e\",\r\n\t\"#fcdc4d\",\r\n\t\"#005397\",\r\n\t\"#0bbcd6\",\r\n\t\"#20ad65\",\r\n\t\"#f8ebee\"\r\n];\r\n\r\nconst I = {\r\n\tbloco: [\r\n\t\t[0, 0, 0, 0],\r\n\t\t[1, 1, 1, 1],\r\n\t\t[0, 0, 0, 0],\r\n\t\t[0, 0, 0, 0]\r\n\t]\r\n};\r\n\r\nconst O = {\r\n\tbloco: [\r\n\t\t[1, 1],\r\n\t\t[1, 1]\r\n\t]\r\n};\r\n\r\nconst T = {\r\n\tbloco: [\r\n\t\t[0, 0, 0],\r\n\t\t[1, 1, 1],\r\n\t\t[0, 1, 0]\r\n\t]\r\n};\r\n\r\nconst J = {\r\n\tbloco: [\r\n\t\t[0, 1, 0],\r\n\t\t[0, 1, 0],\r\n\t\t[1, 1, 0]\r\n\t]\r\n};\r\n\r\nconst L = {\r\n\tbloco: [\r\n\t\t[0, 1, 0],\r\n\t\t[0, 1, 0],\r\n\t\t[0, 1, 1]\r\n\t]\r\n};\r\n\r\nconst S = {\r\n\tbloco: [\r\n\t\t[0, 1, 1],\r\n\t\t[1, 1, 0],\r\n\t\t[0, 0, 0]\r\n\t]\r\n};\r\n\r\nconst Z = {\r\n\tbloco: [\r\n\t\t[1, 1, 0],\r\n\t\t[0, 1, 1],\r\n\t\t[0, 0, 0]\r\n\t]\r\n};\r\n\r\nconst getRandomBloco = () => {\r\n\tconst blocos = [I, O, T, J, L, S, Z];\r\n\tconst bloco = blocos[Math.floor(Math.random() * blocos.length)];\r\n\tbloco.color = colors[Math.floor(Math.random() * colors.length)];\r\n\treturn bloco;\r\n};\r\nconst getRandomPlayer = player => {\r\n\tlet bloco, next;\r\n\tif (player)\r\n\t\tif (player.next) {\r\n\t\t\tbloco = JSON.parse(JSON.stringify(player.next));\r\n\t\t\tnext = getRandomBloco();\r\n\t\t}\r\n\tif (!bloco) bloco = getRandomBloco();\r\n\tif (!next) next = getRandomBloco();\r\n\tconst pos = [0, Math.floor(STAGE_WIDTH / 2 - 2 / 2)];\r\n\treturn { pos, bloco, next };\r\n};\r\n\r\nconst Game = () => {\r\n\tconst [map, setMap] = useState(initialMap);\r\n\tconst [player, setPlayer] = useState();\r\n\tconst [down, setDown] = useState(false);\r\n\tconst [pause, setPause] = useState(false);\r\n\tconst [tick, setTick] = useState(Date.now());\r\n\tconst [hintPlayer, setHintPlayer] = useState();\r\n\tconst [spaceReleased, setSpaceReleased] = useState(true);\r\n\tconst [lines, setlines] = useState(0);\r\n\tconst [score, setScore] = useState(0);\r\n\tconst [level, setLevel] = useState(1);\r\n\tconst [dragX, setDragX] = useState(0);\r\n\tconst [dragY, setDragY] = useState(0);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst levelBaseScore = 1000;\r\n\t\tconst nextLevel = level + 1;\r\n\t\tconst nextLevelScore =\r\n\t\t\t(levelBaseScore * nextLevel * nextLevel * nextLevel) / 5;\r\n\t\tconsole.log(\"Current level: \", level);\r\n\t\tconsole.log(\"Score to next level:\", nextLevelScore);\r\n\t\tconsole.log(\"Remaining: \", nextLevelScore - score);\r\n\t\tif (score >= nextLevelScore) setLevel(level + 1);\r\n\t}, [level, score]);\r\n\r\n\tconst loseGame = () => {\r\n\t\tsetMap(initialMap); //TODO: lose game\r\n\t\tsetlines(0);\r\n\t\tsetScore(0);\r\n\t\tsetLevel(1);\r\n\t};\r\n\r\n\tconst drop = () => {\r\n\t\tif (!player) {\r\n\t\t\tsetPlayer(getRandomPlayer());\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetPlayer(player => {\r\n\t\t\tconst newPos = getNewPlayerPos(\"down\");\r\n\t\t\tif (player.pos === newPos) {\r\n\t\t\t\tsetMap(map => {\r\n\t\t\t\t\tconst mapWithPlayer = PrintPlayerInMap(player, map);\r\n\t\t\t\t\tconst mapCleared = checkMap(mapWithPlayer);\r\n\t\t\t\t\treturn mapCleared;\r\n\t\t\t\t});\r\n\t\t\t\tconst newPlayer = getRandomPlayer(player);\r\n\t\t\t\tif (!validatePosition(newPlayer.pos, newPlayer.bloco)) loseGame();\r\n\t\t\t\treturn newPlayer;\r\n\t\t\t}\r\n\t\t\treturn { ...player, pos: newPos };\r\n\t\t});\r\n\t};\r\n\r\n\tconst rotatePlayer = () => {\r\n\t\tconst clonedPlayer = JSON.parse(JSON.stringify(player));\r\n\t\tlet mtrx = clonedPlayer.bloco.bloco.map((_, index) =>\r\n\t\t\tclonedPlayer.bloco.bloco.map(column => column[index])\r\n\t\t);\r\n\t\tmtrx = mtrx.map(row => row.reverse());\r\n\t\tif (validatePosition(player.pos, { bloco: mtrx }))\r\n\t\t\tsetPlayer({ ...player, bloco: { ...player.bloco, bloco: mtrx } });\r\n\t};\r\n\r\n\tconst keyUp = ({ keyCode }) => {\r\n\t\tconst THRESHOLD = 80;\r\n\t\t// Activate the interval again when user releases down arrow.\r\n\t\tif (keyCode === 40) {\r\n\t\t\tsetDown(false);\r\n\t\t\tif (Date.now() - tick <= THRESHOLD) drop();\r\n\t\t}\r\n\t\tif (keyCode === 32) setSpaceReleased(true);\r\n\t};\r\n\r\n\tconst forwardDown = () => {\r\n\t\tsetPlayer(player => {\r\n\t\t\tconst playerCopy = JSON.parse(JSON.stringify(player));\r\n\t\t\tplayerCopy.pos = [...hintPlayer.pos];\r\n\t\t\tsetMap(map => {\r\n\t\t\t\tconst mapWithPlayer = PrintPlayerInMap(playerCopy, map);\r\n\t\t\t\tconst mapCleared = checkMap(mapWithPlayer);\r\n\t\t\t\treturn mapCleared;\r\n\t\t\t});\r\n\t\t\tconst newPlayer = getRandomPlayer(player);\r\n\t\t\tif (!validatePosition(newPlayer.pos, newPlayer.bloco)) loseGame();\r\n\t\t\treturn newPlayer;\r\n\t\t});\r\n\t};\r\n\r\n\tconst keyDown = ({ keyCode }) => {\r\n\t\tswitch (keyCode) {\r\n\t\t\tcase 37:\r\n\t\t\t\tsetPlayer(player => ({ ...player, pos: getNewPlayerPos(\"left\") }));\r\n\t\t\t\tbreak;\r\n\t\t\tcase 38:\r\n\t\t\t\trotatePlayer();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 39:\r\n\t\t\t\tsetPlayer(player => ({ ...player, pos: getNewPlayerPos(\"right\") }));\r\n\t\t\t\tbreak;\r\n\t\t\tcase 40:\r\n\t\t\t\tsetTick(Date.now());\r\n\t\t\t\tsetDown(true);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 32:\r\n\t\t\t\tif (spaceReleased) {\r\n\t\t\t\t\tsetSpaceReleased(false);\r\n\t\t\t\t\tforwardDown();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tconst checkMap = React.useCallback(\r\n\t\tmap => {\r\n\t\t\tlet rowsClear = [];\r\n\t\t\tmap.forEach((row, y) => {\r\n\t\t\t\tlet clear = true;\r\n\t\t\t\trow.forEach((pixel, x) => {\r\n\t\t\t\t\tif (pixel.fill === 0) clear = false;\r\n\t\t\t\t});\r\n\t\t\t\tif (clear) rowsClear.push(y);\r\n\t\t\t});\r\n\t\t\tif (rowsClear.length > 0) {\r\n\t\t\t\tlet newMap = map.slice();\r\n\t\t\t\trowsClear.forEach(y => {\r\n\t\t\t\t\tfor (let mapY = newMap.length - 1; mapY >= 0; mapY--)\r\n\t\t\t\t\t\tif (mapY <= y)\r\n\t\t\t\t\t\t\tif (mapY > 0) newMap[mapY] = newMap[mapY - 1];\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tnewMap[mapY] = [...new Array(STAGE_WIDTH)].map(() => ({\r\n\t\t\t\t\t\t\t\t\tfill: 0,\r\n\t\t\t\t\t\t\t\t\tcolor: []\r\n\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t});\r\n\t\t\t\tsetlines(quant => quant + rowsClear.length);\r\n\t\t\t\tconst bonusLevel = 100 * (level * level);\r\n\t\t\t\tconst bonusRows = 40 * (rowsClear.length * rowsClear.length - 1);\r\n\t\t\t\tsetScore(score => score + 300 * rowsClear.length + bonusRows + bonusLevel);\r\n\t\t\t\treturn newMap;\r\n\t\t\t}\r\n\t\t\treturn map;\r\n\t\t},\r\n\t\t[level]\r\n\t);\r\n\r\n\tconst validatePosition = React.useCallback(\r\n\t\t(pos, bloco) => {\r\n\t\t\tfor (let y = 0; y < bloco.bloco.length; y++)\r\n\t\t\t\tfor (let x = 0; x < bloco.bloco[y].length; x++)\r\n\t\t\t\t\tif (bloco.bloco[y][x] === 1) {\r\n\t\t\t\t\t\tlet mapY = pos[0] + y;\r\n\t\t\t\t\t\tlet mapX = pos[1] + x;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tmapY > STAGE_HEIGHT ||\r\n\t\t\t\t\t\t\tmapX < 0 ||\r\n\t\t\t\t\t\t\tmapX > STAGE_WIDTH ||\r\n\t\t\t\t\t\t\t!map[mapY] ||\r\n\t\t\t\t\t\t\t!map[mapY][mapX] ||\r\n\t\t\t\t\t\t\tmap[mapY][mapX].fill === 1\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t[map]\r\n\t);\r\n\r\n\tconst calculateHintPlayer = React.useCallback(\r\n\t\tplayer => {\r\n\t\t\tconst hintBloco = JSON.parse(JSON.stringify(player.bloco));\r\n\t\t\tlet hintPosition = [...player.pos];\r\n\t\t\twhile (validatePosition([hintPosition[0] + 1, hintPosition[1]], hintBloco))\r\n\t\t\t\thintPosition = [hintPosition[0] + 1, hintPosition[1]];\r\n\t\t\treturn { pos: hintPosition, bloco: hintBloco };\r\n\t\t},\r\n\t\t[validatePosition]\r\n\t);\r\n\r\n\tconst getNewPlayerPos = React.useCallback(\r\n\t\tmovement => {\r\n\t\t\tlet newPos;\r\n\t\t\tif (!player) return;\r\n\t\t\tif (movement === \"down\") newPos = [player.pos[0] + 1, player.pos[1]];\r\n\t\t\tif (movement === \"left\") newPos = [player.pos[0], player.pos[1] - 1];\r\n\t\t\tif (movement === \"right\") newPos = [player.pos[0], player.pos[1] + 1];\r\n\t\t\tif (!validatePosition(newPos, player.bloco)) return player.pos;\r\n\t\t\treturn newPos;\r\n\t\t},\r\n\t\t[player, validatePosition]\r\n\t);\r\n\r\n\tuseInterval(\r\n\t\t() => {\r\n\t\t\tdrop();\r\n\t\t},\r\n\t\tpause ? null : down ? 50 : 450 - (level - 1) * 20\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!player) return;\r\n\t\tsetHintPlayer(calculateHintPlayer(player));\r\n\t}, [player, calculateHintPlayer]);\r\n\r\n\tconst bind = useDrag(\r\n\t\t({ down, movement: [mx, my], velocity }) => {\r\n\t\t\tconst THRESHOLD = 20;\r\n\t\t\tconst FORCE_THRESHOLD = 1;\r\n\t\t\tif (down) {\r\n\t\t\t\tif (Math.abs(mx - dragX) > THRESHOLD) {\r\n\t\t\t\t\tif (mx - dragX > 0)\r\n\t\t\t\t\t\tsetPlayer(player => ({ ...player, pos: getNewPlayerPos(\"right\") }));\r\n\t\t\t\t\telse setPlayer(player => ({ ...player, pos: getNewPlayerPos(\"left\") }));\r\n\t\t\t\t\tsetDragX(mx);\r\n\t\t\t\t}\r\n\t\t\t\tif (Math.abs(my - dragY) > THRESHOLD) {\r\n\t\t\t\t\tif (velocity > FORCE_THRESHOLD) {\r\n\t\t\t\t\t\tif (spaceReleased) {\r\n\t\t\t\t\t\t\tsetSpaceReleased(false);\r\n\t\t\t\t\t\t\tforwardDown();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (my - dragY > 0) drop();\r\n\t\t\t\t\tsetDragY(my);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsetDragX(0);\r\n\t\t\t\tsetDragY(0);\r\n\t\t\t\tsetSpaceReleased(true);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{ filterTaps: true, lockDirection: true }\r\n\t);\r\n\r\n\tif (!player || !map || !hintPlayer) return \"loading\";\r\n\treturn (\r\n\t\t<div\r\n\t\t\tonBlur={() => setPause(true)}\r\n\t\t\tonFocus={() => setPause(false)}\r\n\t\t\ttabIndex=\"0\"\r\n\t\t\tonKeyUp={keyUp}\r\n\t\t\tonKeyDown={keyDown}\r\n\t\t\tonClick={() => rotatePlayer()}\r\n\t\t\t{...bind()}\r\n\t\t>\r\n\t\t\t<Stage\r\n\t\t\t\tmap={map}\r\n\t\t\t\tplayer={player}\r\n\t\t\t\thint={hintPlayer}\r\n\t\t\t\tstatus={{ lines, score, level }}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Game;\r\n","import { useEffect, useRef } from \"react\";\r\n\r\nexport function useInterval(callback, delay) {\r\n  const savedCallback = useRef();\r\n\r\n  // Remember the latest callback.\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  }, [callback]);\r\n\r\n  // Set up the interval.\r\n  useEffect(() => {\r\n    function tick() {\r\n      savedCallback.current();\r\n    }\r\n    if (delay !== null) {\r\n      let id = setInterval(tick, delay);\r\n      return () => clearInterval(id);\r\n    }\r\n  }, [delay]);\r\n}\r\n","import React, { useState } from \"react\";\r\n\r\nimport StartPage from \"../StartPage\";\r\nimport Game from \"../Game\";\r\n\r\nconst Tetris = () => {\r\n\tconst [runing, setRuning] = useState(true);\r\n\treturn runing ? (\r\n\t\t<Game stopClick={() => setRuning(false)} />\r\n\t) : (\r\n\t\t<StartPage startClick={() => setRuning(true)} />\r\n\t);\r\n};\r\n\r\nexport default Tetris;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport \"./index.css\";\r\n\r\nimport App from \"./App\";\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(<App />, rootElement);\r\n","import React from \"react\";\r\nimport \"./styles.css\";\r\n\r\nimport Tetris from \"./components/Tetris\";\r\n\r\nexport default function App() {\r\n  return <Tetris />;\r\n}\r\n"],"sourceRoot":""}