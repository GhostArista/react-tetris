(this["webpackJsonpreact-tetris"]=this["webpackJsonpreact-tetris"]||[]).push([[0],{13:function(t,n,e){t.exports=e.p+"static/media/background.6255a470.jpg"},16:function(t,n,e){t.exports=e(25)},21:function(t,n,e){},22:function(t,n,e){},25:function(t,n,e){"use strict";e.r(n);var r=e(0),o=e.n(r),i=e(9),c=e.n(i),a=(e(21),e(22),e(1)),u=e(2),l=e(3);function f(){var t=Object(u.a)(['\n\tfont-size: 2.2em;\n\tfont-family: "ZCOOL QingKe HuangYou", cursive;\n\t/* border: 2px solid #222; */\n\tborder: none;\n\tpadding: 30px 100px;\n\tbackground-color: #fff;\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tvertical-align: middle;\n\ttext-decoration: none;\n\ttransition: all 0.5s;\n\tcolor: #95190c;\n\tborder-right: 1px solid #eee;\n\tborder-radius: 2px;\n\tborder-bottom: 1px solid #ccc;\n\n\t:focus {\n\t\toutline: 0;\n\t}\n\n\t:hover {\n\t\tmargin-left: 5px;\n\t\tmargin-top: 5px;\n\t\t::after {\n\t\t\tright: -5px;\n\t\t\ttop: 2px;\n\t\t\twidth: 5px;\n\t\t}\n\t\t::before {\n\t\t\tright: -3px;\n\t\t\theight: 5px;\n\t\t}\n\t}\n\n\t::after {\n\t\tcontent: "";\n\t\theight: 100%;\n\t\twidth: 10px;\n\t\tbackground-color: #eee;\n\t\tright: -10px;\n\t\ttop: 5px;\n\t\ttransform: skewY(45deg);\n\t\tposition: absolute;\n\t\ttransition: all 0.5s;\n\t}\n\n\t::before {\n\t\tcontent: "";\n\t\theight: 10px;\n\t\twidth: 100%;\n\t\tbackground-color: #ccc;\n\t\tright: -5px;\n\t\ttop: 95px;\n\t\ttransform: skewX(45deg);\n\t\tposition: absolute;\n\t\ttransition: all 0.5s;\n\t}\n']);return f=function(){return t},t}function p(){var t=Object(u.a)(["\n\twidth: 100vw;\n\theight: 100vh;\n\toverflow: hidden;\n\tbackground-color: #e3b505;\n"]);return p=function(){return t},t}var s=l.a.div(p()),b=l.a.button(f()),d=function(t){var n=t.startClick;return o.a.createElement(s,null,o.a.createElement(b,{onClick:n},"Start"))},h=e(4),g=e(5),v=e(14);function x(){var t=window;return{width:t.innerWidth,height:t.innerHeight}}var m=e(13),O=e.n(m);function j(){var t=Object(u.a)(["\n\twidth: 100%;\n\ttext-align: center;\n\tcolor: white;\n"]);return j=function(){return t},t}function S(){var t=Object(u.a)(["\n\twidth: 100%;\n\ttext-align: center;\n\tcolor: white;\n"]);return S=function(){return t},t}function w(){var t=Object(u.a)(["\n\tbackground-color: black;\n\tborder: ","px solid white;\n\t",'\n\tfont-family: "ZCOOL QingKe HuangYou", cursive;\n\tpadding: ',"px ","px; /*15*/\n\tmargin-bottom: ","px; /*10*/ \n"]);return w=function(){return t},t}var E=l.a.div(w(),(function(t){return t.borderSize?t.borderSize:"3"}),(function(t){return!t.portrait&&"width: 100%;"}),(function(t){return t.padding?t.padding:"15"}),(function(t){return t.portrait?t.padding/2:0}),(function(t){return t.margin?t.margin:"10"})),k=l.a.div(S()),z=l.a.div(j()),y=function(t){var n=t.title,e=t.value,r=t.padding,i=t.margin,c=t.borderSize,a=t.portrait;return o.a.createElement(E,{portrait:a,padding:r,margin:i,borderSize:c},o.a.createElement(k,null,n),o.a.createElement(z,null,e))};function C(){var t=Object(u.a)(["\n\twidth: ","px;\n\t","\n\t","\n\tmargin-left: ","px;\n\tmargin-top: ","px;\n\tdisplay: flex;\n\tflex-direction: ",";\n\talign-items: center;\n\tjustify-content: ",";\n\tfont-size: ","px;\n"]);return C=function(){return t},t}function J(){var t=Object(u.a)(["\n  width: ","px;\n  height: ","px;\n  background-color: ",";\n\tbox-shadow: ",";\n\tborder-left: 1px solid ",";\n\tborder-top: 1px solid ",";\n"]);return J=function(){return t},t}function N(){var t=Object(u.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: center;\n\theight: ","px;\n"]);return N=function(){return t},t}function L(){var t=Object(u.a)(["\n\tborder: ","px solid white;\n\tbackground-color: black;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n"]);return L=function(){return t},t}function M(){var t=Object(u.a)(["\n\twidth: ","px;\n\theight: ","px;\n\tbackground-color: black;\n\tborder: ","px solid white;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n"]);return M=function(){return t},t}function D(){var t=Object(u.a)(["\n\t","\n\t","\n\tmargin-right: ","px;\n\tmargin-bottom: ","px;\n"]);return D=function(){return t},t}function I(){var t=Object(u.a)(["\n\twidth: 100vw;\n\theight: ","vh;\n\tdisplay: flex;\n\tflex-direction: ",";\n\tjustify-content: center;\n\talign-items: center;\n\tbackground-image: url(",");\n\tbackground-size: cover;\n\tbackground-position: center;\n"]);return I=function(){return t},t}var K=l.a.div(I(),(function(t){return t.portrait?"95":"100"}),(function(t){return t.portrait?"column":"row"}),O.a),A=l.a.div(D(),(function(t){return!t.portrait&&"height: ".concat(18*t.pixelSize+6,"px;")}),(function(t){return t.portrait&&"width: ".concat(10*t.pixelSize+10/3*1,"px;")}),(function(t){return t.portrait?0:t.pixelSize/3}),(function(t){return t.portrait?t.pixelSize/3:0})),H=l.a.div(M(),(function(t){return 3*t.pixelSize}),(function(t){return 3*t.pixelSize}),(function(t){return t.pixelSize/10})),R=l.a.div(L(),(function(t){return t.pixelSize/10})),Y=l.a.div(N(),(function(t){return t.stage?t.pixelSize:t.pixelSize/1.6})),B=o.a.memo(l.a.div(J(),(function(t){return t.stage?t.pixelSize:t.pixelSize/1.6}),(function(t){return t.stage?t.pixelSize:t.pixelSize/1.6}),(function(t){return 1===t.fill?t.color:"inherited"}),(function(t){return t.hint?"inset 0 0 3px ".concat(t.playerColor,", inset 0 0 3px white"):"none"}),(function(t){return t.stage||t.fill||t.hint?"#222":"black"}),(function(t){return t.stage||t.fill||t.hint?"#222":"black"}))),Q=l.a.div(C(),(function(t){return 8*t.pixelSize}),(function(t){return!t.portrait&&"height: ".concat(18*t.pixelSize+6,"px;")}),(function(t){return t.portrait&&"width: ".concat(10*t.pixelSize+10/3*1,"px;")}),(function(t){return t.portrait?0:t.pixelSize/3}),(function(t){return t.portrait?t.pixelSize/3:0}),(function(t){return t.portrait?"row":"column"}),(function(t){return t.portrait?"space-between":"flex-start"}),(function(t){return t.pixelSize})),Z=function(t){var n=t.map,e=t.player,i=t.hint,c=t.status,u=Object(r.useState)(30),l=Object(a.a)(u,2),f=l[0],p=l[1],s=Object(r.useState)(!1),b=Object(a.a)(s,2),d=b[0],h=b[1],g=function(){var t=Object(r.useState)(x()),n=Object(a.a)(t,2),e=n[0],o=n[1];return Object(r.useEffect)((function(){function t(){o(x())}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),e}(),v=g.width,m=g.height;return Object(r.useEffect)((function(){var t=m/20,n=v/32;d&&(t=m/26,n=v/12),p(n<t?n:t),h(m>v)}),[v,m,d]),o.a.createElement(K,{portrait:d},e.next&&o.a.createElement(A,{portrait:d,pixelSize:f},o.a.createElement(H,{pixelSize:f},function(t){var n=[],e={};t.forEach((function(t,r){var o=0;t.forEach((function(t){return o+=t})),o>0&&n.push(t),t.forEach((function(t,n){e[n]=(e[n]?e[n]:0)+t}))}));var r=[];return n.forEach((function(t,n){var o=[];t.forEach((function(t,n){e[n]>0&&o.push(t)})),r.push(o)})),r}(e.next.bloco).map((function(t,n){return o.a.createElement(Y,{pixelSize:f,key:"row-".concat(n)},t.map((function(t,n){return o.a.createElement(B,{pixelSize:f,key:"pixel-".concat(n),fill:t,color:e.next.color})})))})))),n&&o.a.createElement(R,{pixelSize:f},n.map((function(t,n){return o.a.createElement(Y,{stage:"true",pixelSize:f,key:"row-".concat(n)},t.map((function(t,r){var c=e.bloco.bloco[n-e.pos[0]]&&e.bloco.bloco[n-e.pos[0]][r-e.pos[1]],a=i.bloco.bloco[n-i.pos[0]]&&i.bloco.bloco[n-i.pos[0]][r-i.pos[1]];return o.a.createElement(B,{hint:a,pixelSize:f,stage:"true",key:"pixel-".concat(r),fill:t.fill|c,color:c?e.bloco.color:t.color,playerColor:e.bloco.color})})))}))),c&&o.a.createElement(Q,{portrait:d,pixelSize:f},o.a.createElement(y,{portrait:d,borderSize:f/10,margin:f/3,padding:f/2,title:"SCORE",value:c.score}),o.a.createElement(y,{portrait:d,borderSize:f/10,margin:f/3,padding:f/2,title:"LEVEL",value:c.level}),o.a.createElement(y,{portrait:d,borderSize:f/10,margin:f/3,padding:f/2,title:"LINES",value:c.lines})))};var F=function(t,n){for(var e=n.map((function(t){return t.slice()})),r=0;r<t.bloco.bloco.length;r++)for(var o=0;o<t.bloco.bloco.length;o++)if(1===t.bloco.bloco[r][o]){var i=t.pos[0]+r,c=t.pos[1]+o;e[i][c]={fill:1,color:t.bloco.color}}return e},T=Object(g.a)(new Array(18)).map((function(){return Object(g.a)(new Array(10)).map((function(){return{fill:0,color:[]}}))})),U=["#e54b4b","#9a031e","#fcdc4d","#005397","#0bbcd6","#20ad65","#f8ebee"],V={bloco:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]},W={bloco:[[1,1],[1,1]]},X={bloco:[[0,0,0],[1,1,1],[0,1,0]]},q={bloco:[[0,1,0],[0,1,0],[1,1,0]]},G={bloco:[[0,1,0],[0,1,0],[0,1,1]]},P={bloco:[[0,1,1],[1,1,0],[0,0,0]]},$={bloco:[[1,1,0],[0,1,1],[0,0,0]]},_=function(){var t=[V,W,X,q,G,P,$],n=t[Math.floor(Math.random()*t.length)];return n.color=U[Math.floor(Math.random()*U.length)],n},tt=function(t){var n,e;return t&&t.next&&(n=JSON.parse(JSON.stringify(t.next)),e=_()),n||(n=_()),e||(e=_()),{pos:[0,Math.floor(4)],bloco:n,next:e}},nt=function(){var t=Object(r.useState)(T),n=Object(a.a)(t,2),e=n[0],i=n[1],c=Object(r.useState)(),u=Object(a.a)(c,2),l=u[0],f=u[1],p=Object(r.useState)(!1),s=Object(a.a)(p,2),b=s[0],d=s[1],x=Object(r.useState)(!1),m=Object(a.a)(x,2),O=m[0],j=m[1],S=Object(r.useState)(Date.now()),w=Object(a.a)(S,2),E=w[0],k=w[1],z=Object(r.useState)(),y=Object(a.a)(z,2),C=y[0],J=y[1],N=Object(r.useState)(!0),L=Object(a.a)(N,2),M=L[0],D=L[1],I=Object(r.useState)(0),K=Object(a.a)(I,2),A=K[0],H=K[1],R=Object(r.useState)(0),Y=Object(a.a)(R,2),B=Y[0],Q=Y[1],U=Object(r.useState)(1),V=Object(a.a)(U,2),W=V[0],X=V[1],q=Object(r.useState)(0),G=Object(a.a)(q,2),P=G[0],$=G[1],_=Object(r.useState)(0),nt=Object(a.a)(_,2),et=nt[0],rt=nt[1];Object(r.useEffect)((function(){var t=W+1,n=1e3*t*t*t/5;console.log("Current level: ",W),console.log("Score to next level:",n),console.log("Remaining: ",n-B),B>=n&&X(W+1)}),[W,B]);var ot=function(){i(T),H(0),Q(0),X(1)},it=function(){f(l?function(t){var n=pt("down");if(t.pos===n){i((function(n){var e=F(t,n);return ut(e)}));var e=tt(t);return lt(e.pos,e.bloco)||ot(),e}return Object(h.a)({},t,{pos:n})}:tt())},ct=function(){var t=JSON.parse(JSON.stringify(l)),n=t.bloco.bloco.map((function(n,e){return t.bloco.bloco.map((function(t){return t[e]}))}));n=n.map((function(t){return t.reverse()})),lt(l.pos,{bloco:n})&&f(Object(h.a)({},l,{bloco:Object(h.a)({},l.bloco,{bloco:n})}))},at=function(){f((function(t){var n=JSON.parse(JSON.stringify(t));n.pos=Object(g.a)(C.pos),i((function(t){var e=F(n,t);return ut(e)}));var e=tt(t);return lt(e.pos,e.bloco)||ot(),e}))},ut=o.a.useCallback((function(t){var n=[];if(t.forEach((function(t,e){var r=!0;t.forEach((function(t,n){0===t.fill&&(r=!1)})),r&&n.push(e)})),n.length>0){var e=t.slice();n.forEach((function(t){for(var n=e.length-1;n>=0;n--)n<=t&&(e[n]=n>0?e[n-1]:Object(g.a)(new Array(10)).map((function(){return{fill:0,color:[]}})))})),H((function(t){return t+n.length}));var r=W*W*100,o=40*(n.length*n.length-1);return Q((function(t){return t+300*n.length+o+r})),e}return t}),[W]),lt=o.a.useCallback((function(t,n){for(var r=0;r<n.bloco.length;r++)for(var o=0;o<n.bloco[r].length;o++)if(1===n.bloco[r][o]){var i=t[0]+r,c=t[1]+o;if(i>18||c<0||c>10||!e[i]||!e[i][c]||1===e[i][c].fill)return!1}return!0}),[e]),ft=o.a.useCallback((function(t){for(var n=JSON.parse(JSON.stringify(t.bloco)),e=Object(g.a)(t.pos);lt([e[0]+1,e[1]],n);)e=[e[0]+1,e[1]];return{pos:e,bloco:n}}),[lt]),pt=o.a.useCallback((function(t){var n;if(l)return"down"===t&&(n=[l.pos[0]+1,l.pos[1]]),"left"===t&&(n=[l.pos[0],l.pos[1]-1]),"right"===t&&(n=[l.pos[0],l.pos[1]+1]),lt(n,l.bloco)?n:l.pos}),[l,lt]);!function(t,n){var e=Object(r.useRef)();Object(r.useEffect)((function(){e.current=t}),[t]),Object(r.useEffect)((function(){if(null!==n){var t=setInterval((function(){e.current()}),n);return function(){return clearInterval(t)}}}),[n])}((function(){it()}),O?null:b?50:450-20*(W-1)),Object(r.useEffect)((function(){l&&J(ft(l))}),[l,ft]);var st=Object(v.a)((function(t){var n=t.down,e=Object(a.a)(t.movement,2),r=e[0],o=e[1],i=t.velocity;n?(Math.abs(r-P)>20&&(f(r-P>0?function(t){return Object(h.a)({},t,{pos:pt("right")})}:function(t){return Object(h.a)({},t,{pos:pt("left")})}),$(r)),Math.abs(o-et)>20&&(i>1?M&&(D(!1),at()):o-et>0&&it(),rt(o))):($(0),rt(0),D(!0))}),{filterTaps:!0,lockDirection:!0});return l&&e&&C?o.a.createElement("div",Object.assign({onBlur:function(){return j(!0)},onFocus:function(){return j(!1)},tabIndex:"0",onKeyUp:function(t){var n=t.keyCode;40===n&&(d(!1),Date.now()-E<=80&&it()),32===n&&D(!0)},onKeyDown:function(t){switch(t.keyCode){case 37:f((function(t){return Object(h.a)({},t,{pos:pt("left")})}));break;case 38:ct();break;case 39:f((function(t){return Object(h.a)({},t,{pos:pt("right")})}));break;case 40:k(Date.now()),d(!0);break;case 32:M&&(D(!1),at())}},onClick:function(){return ct()}},st()),o.a.createElement(Z,{map:e,player:l,hint:C,status:{lines:A,score:B,level:W}})):"loading"},et=function(){var t=Object(r.useState)(!0),n=Object(a.a)(t,2),e=n[0],i=n[1];return e?o.a.createElement(nt,{stopClick:function(){return i(!1)}}):o.a.createElement(d,{startClick:function(){return i(!0)}})};var rt=document.getElementById("root");c.a.render(o.a.createElement((function(){return o.a.createElement(et,null)}),null),rt)}},[[16,1,2]]]);
//# sourceMappingURL=main.0793db4a.chunk.js.map